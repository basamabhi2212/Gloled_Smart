<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lighting & Measurement Tools</title>
    <link rel="stylesheet" href="style.css">
    <!-- Include jsPDF library for client-side PDF generation.
         You would download this and host it locally, or use a CDN. -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <header>
        <h1>Lighting & Measurement Tools</h1>
    </header>
    <nav class="tabs">
        <button class="tab-button active" data-tab="converterTools">Converter Tools</button>
        <button class="tab-button" data-tab="lightingTools">Lighting Tools</button>
        <button class="tab-button" data-tab="estimationPdfGenerator">Estimation PDF</button> <!-- New Tab -->
    </nav>

    <main class="container">
        <!-- Existing Converter Tools tab content -->
        <div id="converterTools" class="tab-content active">
            <section class="tool-card">
                <h2>Feet ⇄ Meter Converter</h2>
                <p class="use-case">Useful for pole height, cable length, site measurements.</p>
                <div class="input-group">
                    <label for="feetInput">Feet (ft):</label>
                    <input type="number" id="feetInput" placeholder="Enter feet" aria-label="Feet input">
                </div>
                <div class="input-group">
                    <label for="metersInput">Meters (m):</label>
                    <input type="number" id="metersInput" placeholder="Enter meters" aria-label="Meters input">
                </div>
            </section>
        </div>

        <!-- Existing Lighting Tools tab content -->
        <div id="lightingTools" class="tab-content">
            <section class="tool-card">
                <h2>Watt ⇄ Lumen Converter</h2>
                <p class="use-case">Customers ask 'How bright is this light?' Use lumen/watt conversion for LED specs.</p>
                <div class="input-group">
                    <label for="wattsInput">Watts (W):</label>
                    <input type="number" id="wattsInput" placeholder="Enter watts" aria-label="Watts input">
                </div>
                <div class="input-group">
                    <label for="efficacyInput">Efficacy (lm/W):</label>
                    <input type="number" id="efficacyInput" value="100" placeholder="Enter efficacy" aria-label="Efficacy input">
                </div>
                <div class="result-display">
                    <p>Lumens (lm): <span id="lumensOutput">0</span></p>
                </div>
            </section>

            <section class="tool-card">
                <h2>Lux Calculator (Simplified)</h2>
                <p class="use-case">For suggesting correct lighting for: Warehouses, Streets, Homes, Offices.</p>
                <div class="input-group">
                    <label for="luxWattageInput">Wattage (W):</label>
                    <input type="number" id="luxWattageInput" placeholder="Enter wattage" aria-label="Wattage for lux calculator">
                </div>
                <div class="input-group">
                    <label for="mountingHeightInput">Mounting Height (m):</label>
                    <input type="number" id="mountingHeightInput" placeholder="Enter mounting height" aria-label="Mounting height for lux calculator">
                </div>
                <div class="input-group">
                    <label for="fixtureLumenOutputInput">Fixture Lumen Output (lm):</label>
                    <input type="number" id="fixtureLumenOutputInput" placeholder="Enter lumen output" aria-label="Fixture lumen output for lux calculator">
                </div>
                <div class="result-display">
                    <p>Approximate Lux: <span id="approxLuxOutput">0</span></p>
                </div>
            </section>

            <section class="tool-card">
                <h2>LED Driver Calculator</h2>
                <div class="input-group">
                    <label for="forwardVoltageInput">Forward Voltage (Vf) per LED (V):</label>
                    <input type="number" id="forwardVoltageInput" placeholder="e.g., 3.2" aria-label="Forward voltage per LED">
                </div>
                <div class="input-group">
                    <label for="currentInput">Current (I) per LED (mA):</label>
                    <input type="number" id="currentInput" placeholder="e.g., 350" aria-label="Current per LED">
                </div>
                <div class="input-group">
                    <label for="numLedsInput">Number of LEDs in series:</label>
                    <input type="number" id="numLedsInput" placeholder="e.g., 10" aria-label="Number of LEDs in series">
                </div>
                <div class="result-display">
                    <p>Total Voltage: <span id="driverTotalVoltage">0</span> V</p>
                    <p>Total Power: <span id="driverTotalPower">0</span> W</p>
                    <p>Recommended Driver Specs: <span id="driverRecommendation">N/A</span></p>
                </div>
            </section>

            <section class="tool-card">
                <h2>Home Purpose Lighting Suggestion</h2>
                <div id="roomContainer">
                    <div class="room-entry">
                        <label for="roomType0">Room Type:</label>
                        <select id="roomType0" aria-label="Room type selection">
                            <option value="">Select Room</option>
                            <option value="Bedroom">Bedroom</option>
                            <option value="Living Room">Living Room</option>
                            <option value="Kitchen">Kitchen</option>
                            <option value="Bathroom">Bathroom</option>
                            <option value="Dining Room">Dining Room</option>
                            <option value="Office">Office</option>
                            <option value="Hallway">Hallway</option>
                        </select>
                        <label for="numBedrooms0">Number of Bedrooms:</label>
                        <select id="numBedrooms0" aria-label="Number of bedrooms selection">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4+">4+</option>
                        </select>
                        <button type="button" class="remove-room-button" aria-label="Remove room">Remove</button>
                    </div>
                </div>
                <button type="button" id="addRoomButton" aria-label="Add another room">Add Room</button>
                <div class="result-display">
                    <p id="homeLightingSuggestion">Suggestions will appear here based on room types.</p>
                </div>
            </section>
        </div>

        <!-- NEW TAB: Estimation PDF Generator -->
        <div id="estimationPdfGenerator" class="tab-content">
            <section class="tool-card">
                <h2>Product Estimation PDF Generator</h2>
                <p class="use-case">Loads product data from 'products.json' to generate an estimation PDF.</p>

                <div class="input-group">
                    <label for="customerName">Customer Name:</label>
                    <input type="text" id="customerName" placeholder="Enter customer name" aria-label="Customer name">
                </div>
                <div class="input-group">
                    <label for="customerEmail">Customer Email:</label>
                    <input type="email" id="customerEmail" placeholder="Enter customer email" aria-label="Customer email">
                </div>
                <div class="input-group">
                    <label for="estimateId">Estimate ID:</label>
                    <input type="text" id="estimateId" value="EST-001" placeholder="e.g., EST-001" aria-label="Estimate ID">
                </div>

                <div class="button-group">
                    <button type="button" id="loadProductsButton" aria-label="Load Products Data">Load Product Data</button>
                    <button type="button" id="generatePdfButton" disabled aria-label="Generate Estimation PDF">Generate Estimation PDF</button>
                </div>

                <h3>Available Products for Estimation:</h3>
                <div id="productsDisplay" class="products-table-container">
                    <p>Click "Load Product Data" to see products.</p>
                    <!-- Products will be dynamically loaded here -->
                </div>
                 <div class="result-display">
                    <p>Total Estimated Price (Selected Products): <span id="totalEstimatedPrice">₹ 0.00</span></p>
                </div>
            </section>
        </div>

    </main>

    <script src="script.js"></script>
</body>
</html>
